nimblePath = "nimbledeps/pkgs2"
@if emscripten:
  cc = clang
  clang.exe = "emcc"
  clang.linkerexe = "emcc"
  clang.options.linker = ""
  nimcache = "../cache"
  outdir = "../bin"
  cpu = "wasm32"
  os = "linux"
  d = "emscripten"
  d = "use_sdl2_image"
  d = "use_sdl2_ttf"
  dynlibOverride = "SDL2"
  dynlibOverride = "SDL2_image"
  dynlibOverride = "SDL2_ttf"
  dynlibOverride = "pthread"
  warning[GcMem] = off
  passC = "-s USE_SDL=2 -s USE_SDL_IMAGE=2 -s USE_SDL_TTF=2 -s ALLOW_MEMORY_GROWTH=1 -s USE_PTHREADS=0 -s WASM_BIGINT=1 -s INITIAL_MEMORY=268435456"
  passL = "-s USE_SDL=2 -s USE_SDL_IMAGE=2 -s USE_SDL_TTF=2 -s ALLOW_MEMORY_GROWTH=1 -s USE_PTHREADS=0 -s WASM_BIGINT=1 -s INITIAL_MEMORY=268435456"
  @if debug:
    passC %= "-s VERBOSE=1 -s STACK_OVERFLOW_CHECK=1 -g -s ASSERTIONS=1 -fsanitize=undefined"
    passL %= "-s VERBOSE=1 -s STACK_OVERFLOW_CHECK=1 -g -fsanitize=undefined"
  @end
  @if release:
    passL %= "-0z --llvm-lto 1"
  @end
  passL %= "-s SDL2_IMAGE_FORMATS=[\"png\"] -lpthread"
@end

